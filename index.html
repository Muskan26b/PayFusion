<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>PayFusion</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/quill/quill.snow.css" rel="stylesheet">
  <link href="assets/vendor/quill/quill.bubble.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">


  <style>
    body {
      color: var(--color-dark);
    }

    main {
      margin-top: 1.4rem;
    }

    main .date {
      display: inline-block;
      background-color: var(--color-dark);
      border-radius: var(--border-radius-1);
      margin-top: 1rem;
      padding: 0.5rem 1.6rem;

    }

    main .date input[type="date"] {
      background: transparent;
      border-radius: 0.2rem;
      width: 10rem;
      padding: 0.3rem;
    }

    main .insights {
      margin-top: 2rem;
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.6rem;
    }

    main .insights>div {
      background: var(--color-white);
      background-color: white;
      padding: 1rem;
      border-radius: 0.4rem;
      margin-top: 1rem;
      box-shadow: 0px 0 30px rgba(1, 41, 112, 0.1);
      transition: all 300ms ease;
      cursor: pointer;
    }



    main .insights>div span {
      background: rgb(99, 99, 234);
      padding: 0.7rem;
      border-radius: 50%;
      color: white;
      font-size: 2rem;
    }

    main .insights>div.grosssalary span {
      background-color: palevioletred;
    }

    main .insights>div.netsalary span {
      background-color: green;
    }

    main .insights>div.deductions span {
      background-color: brown;
    }

    main .insights>div .middle {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    main .insights h3 {
      margin: 1rem 0 0.6rem;
      font-size: 1rem;
    }

    main .insights .progress {
      position: relative;
      width: 92px;
      height: 92px;
      border-radius: 50%;
    }

    main .insights svg {

      width: 7rem;
      height: 7rem;
    }

    main .insights svg circle {
      fill: none;
      stroke: rgb(99, 99, 234);
      stroke-width: 14;
      stroke-linecap: round;
      transform: translate(5px, 5px);
      stroke-dasharray: 110;
      stroke-dashoffset: 92;
    }

    main .insights .totalemp svg circle {
      stroke-dashoffset: -30;
      stroke-dasharray: 200;
    }

    main .insights .grosssalary svg circle {
      stroke-dashoffset: 20;
      stroke-dasharray: 200;
    }

    main .insights .netsalary svg circle {
      stroke-dashoffset: 25;
      stroke-dasharray: 200;
    }

    main .insights .deductions svg circle {
      stroke-dashoffset: 35;
      stroke-dasharray: 110;
    }

    main .insights .progress .number {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .container {
      display: flex;
      justify-content: space-between;
      /* Adjust spacing between the cards */
    }

    .card {
      width: 48%;
      /* Adjust width of cards */
    }

    .attendance-card {
      background-color: white;
      /* Example background color */
    }

    .calendar-card {
      background-color: white;
      /* Example background color */
    }

    .bi-calendar-check {
      margin-left: auto;
    }

    .attendance {
      margin-top: 15px;
      margin-right: auto;
    }

    .toggle-icon:hover {
      color: blue;
      cursor: pointer;
    }

    .toggle-icon.active {
      color: blue;
      /* Set color for active state */
    }

    .toggle-icon:not(.active) {
      color: black;
      /* Set color for inactive state */
    }

    .timer-display {
      text-align: center;
      font-size: 50px;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin-top: 30px;
      margin-bottom: 30px;
    }

    .datetime {
      text-align: center;
      font-size: 20px;
    }

    .progress-bar {
      width: 100%;
      height: 15px;
      background-color: #ddd;
      position: relative;
    }

    .progress-bar .progress {
      position: absolute;
      width: 50%;
      height: 100%;
      background-color: blue;
      transition: width 0.5s ease;
      /* Smooth transition animation */
    }






    .start-time,
    .end-time {
      color: black;
      font-weight: bold;
    }

    .check-in,
    .check-out {
      color: solid black;
      font-weight: 500;
      font-size: 18px;
    }
  </style>


</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top d-flex align-items-center bg-dark">

    <div class="d-flex align-items-center justify-content-between">
      <a href="index.html" class="logo d-flex align-items-center">
        <img src="assets/img/logo.png" alt="">
        <span class="d-none d-lg-block">PayFusion</span>
      </a>
      <i class="bi bi-list toggle-sidebar-btn"></i>
    </div><!-- End Logo -->

    <div class="search-bar">
      <form class="search-form d-flex align-items-center" method="POST" action="#">
        <input type="text" name="query" placeholder="Search" title="Enter search keyword">
        <button type="submit" title="Search"><i class="bi bi-search"></i></button>
      </form>
    </div><!-- End Search Bar -->

    <nav class="header-nav ms-auto">
      <ul class="d-flex align-items-center">

        <li class="nav-item d-block d-lg-none">
          <a class="nav-link nav-icon search-bar-toggle " href="#">
            <i class="bi bi-search"></i>
          </a>
        </li><!-- End Search Icon-->

        <li class="nav-item dropdown">

          <a class="nav-link nav-icon" href="#" data-bs-toggle="dropdown">
            <i class="bi bi-bell"></i>
            <span class="badge bg-primary badge-number">4</span>
          </a><!-- End Notification Icon -->

          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow notifications">
            <li class="dropdown-header">
              You have 4 new notifications
              <a href="#"><span class="badge rounded-pill bg-primary p-2 ms-2">View all</span></a>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>

            <li class="notification-item">
              <i class="bi bi-exclamation-circle text-warning"></i>
              <div>
                <h4>Lorem Ipsum</h4>
                <p>Quae dolorem earum veritatis oditseno</p>
                <p>30 min. ago</p>
              </div>
            </li>

            <li>
              <hr class="dropdown-divider">
            </li>

            <li class="notification-item">
              <i class="bi bi-x-circle text-danger"></i>
              <div>
                <h4>Atque rerum nesciunt</h4>
                <p>Quae dolorem earum veritatis oditseno</p>
                <p>1 hr. ago</p>
              </div>
            </li>

            <li>
              <hr class="dropdown-divider">
            </li>

            <li class="notification-item">
              <i class="bi bi-check-circle text-success"></i>
              <div>
                <h4>Sit rerum fuga</h4>
                <p>Quae dolorem earum veritatis oditseno</p>
                <p>2 hrs. ago</p>
              </div>
            </li>

            <li>
              <hr class="dropdown-divider">
            </li>

            <li class="notification-item">
              <i class="bi bi-info-circle text-primary"></i>
              <div>
                <h4>Dicta reprehenderit</h4>
                <p>Quae dolorem earum veritatis oditseno</p>
                <p>4 hrs. ago</p>
              </div>
            </li>

            <li>
              <hr class="dropdown-divider">
            </li>
            <li class="dropdown-footer">
              <a href="#">Show all notifications</a>
            </li>

          </ul><!-- End Notification Dropdown Items -->

        </li><!-- End Notification Nav -->

        <li class="nav-item dropdown">

          <a class="nav-link nav-icon" href="#" data-bs-toggle="dropdown">
            <i class="bi bi-chat-left-text"></i>
            <span class="badge bg-success badge-number">3</span>
          </a><!-- End Messages Icon -->

          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages">
            <li class="dropdown-header">
              You have 3 new messages
              <a href="#"><span class="badge rounded-pill bg-primary p-2 ms-2">View all</span></a>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>

            <li class="message-item">
              <a href="#">
                <img src="assets/img/messages-1.jpg" alt="" class="rounded-circle">
                <div>
                  <h4>Maria Hudson</h4>
                  <p>Velit asperiores et ducimus soluta repudiandae labore officia est ut...</p>
                  <p>4 hrs. ago</p>
                </div>
              </a>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>

            <li class="message-item">
              <a href="#">
                <img src="assets/img/messages-2.jpg" alt="" class="rounded-circle">
                <div>
                  <h4>Anna Nelson</h4>
                  <p>Velit asperiores et ducimus soluta repudiandae labore officia est ut...</p>
                  <p>6 hrs. ago</p>
                </div>
              </a>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>

            <li class="message-item">
              <a href="#">
                <img src="assets/img/messages-3.jpg" alt="" class="rounded-circle">
                <div>
                  <h4>David Muldon</h4>
                  <p>Velit asperiores et ducimus soluta repudiandae labore officia est ut...</p>
                  <p>8 hrs. ago</p>
                </div>
              </a>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>

            <li class="dropdown-footer">
              <a href="#">Show all messages</a>
            </li>

          </ul><!-- End Messages Dropdown Items -->

        </li><!-- End Messages Nav -->

        <li class="nav-item dropdown pe-3">

          <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
            <img id="nav-profile-img" src="assets/img/profile-img.jpg" alt="Profile" class="rounded-circle">
            <span class="d-none d-md-block dropdown-toggle ps-2" id="nav-profile-name"></span>
          </a><!-- End Profile Iamge Icon -->

          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
            <li class="dropdown-header">
              <h6><span id="nav-pro-name"></span></h6>
              <span id="nav-designation"></span>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>

            <li>
              <a class="dropdown-item d-flex align-items-center" href="profile.html">
                <i class="bi bi-person"></i>
                <span>My Profile</span>
              </a>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>
            <li>
              <a class="dropdown-item d-flex align-items-center" id="account-settings"
                href="profile.html?activeTab=edit">
                <i class="bi bi-gear"></i>
                <span>Profile Settings</span>
              </a>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>
            <li>
              <a class="dropdown-item d-flex align-items-center" href="#">
                <i class="bi bi-box-arrow-right"></i>
                <span>Sign Out</span>
              </a>
            </li>

          </ul><!-- End Profile Dropdown Items -->
        </li><!-- End Profile Nav -->

      </ul>
    </nav><!-- End Icons Navigation -->

  </header><!-- End Header -->

  <!-- ======= Sidebar ======= -->
  <aside id="sidebar" class="sidebar">

    <ul class="sidebar-nav" id="sidebar-nav">
      <li class="nav-item">
        <a class="nav-link active" href="index.html">
          <i class="bi bi-grid"></i>
          <span>Dashboard</span>
        </a>
      </li><!-- End Dashboard Nav -->
      <li class="nav-item">
        <a class="nav-link collapsed" href="employee.html">
          <i class="bi bi-card-list"></i>
          <span>Employee Master</span>
        </a>
      </li><!-- End Employee Nav -->
      <li class="nav-item">
        <a class="nav-link collapsed" href="CTC.html">
          <i class="bi bi-card-list"></i>
          <span>CTC Master</span>
        </a>
      </li><!-- End CTC Nav -->
      <li class="nav-item">
        <a class="nav-link collapsed " href="attendance.html">
          <i class="bi bi-card-list"></i>
          <span>Attendance Master</span>
        </a>
      </li><!-- End Attendance Nav -->
      <li class="nav-item">
        <a class="nav-link collapsed" href="payroll.html">
          <i class="bi bi-card-list"></i>
          <span>Payroll Master</span>
        </a>
      </li><!-- End Payroll Nav -->
      <li class="nav-item">
        <a class="nav-link collapsed " href="year.html">
          <i class="bi bi-card-list"></i>
          <span>Year Master</span>
        </a>
      </li><!-- End Year Nav -->

      <li class="nav-heading">Pages</li>
      <li class="nav-item">
        <a class="nav-link collapsed" href="profile.html">
          <i class="bi bi-person"></i>
          <span>Profile</span>
        </a>
      </li><!-- End Profile Page Nav -->

      <li class="nav-item">
        <a class="nav-link collapsed" href="register.html">
          <i class="bi bi-card-list"></i>
          <span>Register</span>
        </a>
      </li><!-- End Register Page Nav -->

      <li class="nav-item">
        <a class="nav-link collapsed" href="login.html">
          <i class="bi bi-box-arrow-in-right"></i>
          <span>Login</span>
        </a>
      </li><!-- End Login Page Nav -->
    </ul>
  </aside><!-- End Sidebar-->

  <main id="main" class="main">

    <div class="pagetitle">
      <h1>Dashboard</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="index.html">Home</a></li>
          <li class="breadcrumb-item active">Dashboard</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->


    <div class="container">
      <div class="card attendance-card">
        <div class="card-body">
          <h2 class="attendance d-flex justify-content-between align-items-center">Attendance
            <ul class="nav nav-tabs nav-tabs-bordered">
              <li><i id="daily-toggle" class="bi bi-calendar-check toggle-icon active nav-link"
                  data-bs-toggle="tab"></i></li>
              <li><i id="weekly-toggle" class="bi bi-calendar-week toggle-icon nav-link"></i></li>
            </ul>
          </h2>
          <div class="tab-content">
            <div class="tab-pane fade show active" id="daily-tab">
              <h1 class="timer-display">
                <p id="timer">00:00:00</p>
              </h1>

              <div id="current-date-time" class="datetime">
                <div id="current-day"></div>
                <div id="current-date"></div>
              </div>

              <div class="progress-bar">
                <div class="progress"></div>
              </div>
              <div class="row">
                <div class="col">
                  <div class="p-timer d-flex justify-content-between align-items-center">
                    <div class="start-time">9.00am</div>
                    <div class="end-time">5.30pm</div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <div class="p-check d-flex justify-content-between align-items-center">
                    <div class="check-in">Check-in Time</div>
                    <div class="check-out">Check-out Time</div>
                  </div>
                </div>
              </div>
            </div>
            <div class="chart-container tab-pane fade" id="weekly-tabs">
              <canvas id="weekly-attendance-chart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <div class="card calendar-card">
        <div class="card-header">
          Upcoming Holidays
        </div>

        <div class="card-body" style="height: 300px; overflow-y: auto;">
          <ul id="holidayList" style="overflow: auto; font-size: 20px;">
            <li class="list-group-item  d-flex justify-content-between align-items-center"
              style=" margin-top: 20px; margin-bottom: 20px;">
              <div>Independence day </div>
              <div>15th Aug (Thursday)</div>
            </li>
            <li class="list-group-item  d-flex justify-content-between align-items-center"
              style=" margin-top: 20px; margin-bottom: 20px;">
              <div>Raksha Bandhan</div>
              <div>19th Aug (Monday)</div>
            </li>
            <li class="list-group-item  d-flex justify-content-between align-items-center"
              style=" margin-top: 20px; margin-bottom: 20px;">
              <div>Ganesh Chaturthi</div>
              <div>7th Sep (Saturday)</div>
            </li>
            <li class="list-group-item  d-flex justify-content-between align-items-center"
              style=" margin-top: 20px; margin-bottom: 20px;">
              <div>Gandhi Jayanti</div>
              <div>2nd Oct (Wednesday)</div>
            </li>
            <li class="list-group-item  d-flex justify-content-between align-items-center"
              style=" margin-top: 20px; margin-bottom: 20px;">
              <div>Dussehra</div>
              <div>12th Oct (Saturday)</div>
            </li>
            <li class="list-group-item  d-flex justify-content-between align-items-center"
              style=" margin-top: 20px; margin-bottom: 20px;">
              <div>Diwali (Deepawali)</div>
              <div>31st Oct (Thursday)</div>
            </li>
            <li class="list-group-item  d-flex justify-content-between align-items-center"
              style=" margin-top: 20px; margin-bottom: 20px;">
              <div>Diwali</div>
              <div>1st Nov (Friday)</div>
            </li>
            <li class="list-group-item  d-flex justify-content-between align-items-center"
              style=" margin-top: 20px; margin-bottom: 20px;">
              <div>Gujarati New Year</div>
              <div>2nd Nov (Saturday)</div>
            </li>
          </ul>
        </div>

      </div>
    </div>




  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">
    <div class="copyright">
      &copy; Copyright <strong><span>PayFusion</span></strong>. All Rights Reserved
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/apexcharts/apexcharts.min.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/chart.js/chart.umd.js"></script>
  <script src="assets/vendor/echarts/echarts.min.js"></script>
  <script src="assets/vendor/quill/quill.min.js"></script>
  <script src="assets/vendor/simple-datatables/simple-datatables.js"></script>
  <script src="assets/vendor/tinymce/tinymce.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/7.14.1-0/firebase.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>



  <script type="module">

    let timerInterval; // Declare timerInterval variable at the global level
    let startTime; // Declare startTime variable at the global level

    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js";
    import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-database.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBFZCp7QTt-aP7DbuNVepmy8hZWAFeLQ5M",
      authDomain: "payfusion-project.firebaseapp.com",
      databaseURL: "https://payfusion-project-default-rtdb.firebaseio.com",
      projectId: "payfusion-project",
      storageBucket: "payfusion-project.appspot.com",
      messagingSenderId: "1000636166254",
      appId: "1:1000636166254:web:f7b1ae682735533978367f"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const database = getDatabase(app);

    document.addEventListener('DOMContentLoaded', function () {

      // Retrieve the data for the current user
      onAuthStateChanged(auth, (user) => {
        if (user) {
          const userEmail = user.email;
          const userRef = ref(database, `payfusion/Register record/${userEmail.replace(/[.#$[\]]/g, "_")}`);

          // Fetch the user data and display it in the profile page
          onValue(userRef, (snapshot) => {
            if (snapshot.exists()) {
              const userData = snapshot.val();
              document.getElementById('nav-profile-name').textContent = userData.name;
              document.getElementById('nav-pro-name').textContent = userData.name;
              document.getElementById('nav-designation').textContent = userData.designation;

            } else {
              console.log('No data available for this user.');
            }
          });
        } else {
          console.log('No user is signed in.');
        }
      });






      //------------------------------------------------ daily attendance--------------------------------------------------------------------------------------------------------------------------------------   

      // Get the daily and weekly toggle icons
      const dailyToggle = document.getElementById('daily-toggle');
      const weeklyToggle = document.getElementById('weekly-toggle');

      // Get the daily and weekly tab content
      const dailyTabContent = document.getElementById('daily-tab');
      const weeklyTabContent = document.getElementById('weekly-tabs');

      // Add event listener for the daily toggle
      dailyToggle.addEventListener('click', function () {
        // Remove active class from all toggle icons
        dailyToggle.classList.add('active');
        weeklyToggle.classList.remove('active');

        // Show daily tab content and hide weekly tab content
        dailyTabContent.classList.add('show', 'active');
        weeklyTabContent.classList.remove('show', 'active');
      });

      // Add event listener for the weekly toggle
      weeklyToggle.addEventListener('click', function () {
        // Remove active class from all toggle icons
        weeklyToggle.classList.add('active');
        dailyToggle.classList.remove('active');

        // Show weekly tab content and hide daily tab content
        weeklyTabContent.classList.add('show', 'active');
        dailyTabContent.classList.remove('show', 'active');


      });

      // Function to check if the current time is within the work hours (9:00 AM to 5:30 PM)
      function isWithinWorkHours() {
        const now = new Date();
        const startOfWorkTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 9, 0); // 9:00 AM
        const endOfWorkTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 17, 30); // 5:30 PM
        return now >= startOfWorkTime && now <= endOfWorkTime;
      }

      // Function to update date and day
      function updateDateAndDay() {
        const now = new Date();
        const optionsDay = { weekday: 'long' };
        const optionsDate = { year: 'numeric', month: 'long', day: 'numeric' };

        const formattedDay = now.toLocaleDateString('en-US', optionsDay);
        const formattedDate = now.toLocaleDateString('en-US', optionsDate);

        document.getElementById('current-day').textContent = formattedDay;
        document.getElementById('current-date').textContent = formattedDate;
      }

      // Call the function to update date and day when the page loads
      updateDateAndDay();

      // Function to start the timer only if the current time is within work hours
      function startTimerIfWithinWorkHours() {
        if (isWithinWorkHours()) {
          const storedStartTime = localStorage.getItem('startTime');
          if (storedStartTime) {
            startTime = new Date(storedStartTime);
          } else {
            startTime = new Date(); // Record the start time if not stored
          }
          startTimer(); // Start the timer only if within work hours
          updateProgressBar(); // Update the progress bar dynamically
        } else {
          // If the current time is not within work hours, reset the timer
          resetAttendance();
        }
      }


      // Call the function to start the timer if within work hours
      startTimerIfWithinWorkHours();

      // Function to start the timer
      function startTimer() {
        timerInterval = setInterval(updateTimerDisplay, 1000); // Update the timer display every second
      }

      // Function to update the timer display
      function updateTimerDisplay() {
        const currentTime = new Date();
        const elapsedTime = currentTime - startTime; // Calculate the elapsed time in milliseconds

        // Convert the elapsed time to hours, minutes, and seconds
        const hours = Math.floor(elapsedTime / (1000 * 60 * 60));
        const minutes = Math.floor((elapsedTime % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((elapsedTime % (1000 * 60)) / 1000);

        // Format the hours, minutes, and seconds as a string
        const formattedTime = `${padZero(hours)}:${padZero(minutes)}:${padZero(seconds)}`;

        // Update the timer display
        document.getElementById('timer').textContent = formattedTime;

        // Store the start time in local storage
        localStorage.setItem('startTime', startTime);
      }

      // Function to pad zero to single-digit numbers
      function padZero(num) {
        return num < 10 ? `0${num}` : num; // Add leading zero if the number is less than 10
      }

      // Function to reset attendance, including timer and progress bar
      function resetAttendance() {
        const now = new Date();
        const endOfWorkTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 17, 30); // 5:30 PM

        // Check if the current time is past 5:30 PM
        if (now > endOfWorkTime) {
          clearInterval(timerInterval); // Stop the timer interval
          startTime = null; // Reset startTime
          localStorage.removeItem('startTime'); // Remove start time from local storage
          // Reset the timer display to 00:00:00
          document.getElementById('timer').textContent = '00:00:00';
          // Reset the progress bar
          const progressBar = document.querySelector('.progress-bar .progress');
          progressBar.style.width = '0%';
        }
      }


      function updateProgressBar() {
        const now = new Date();
        const startOfWorkTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 9, 0); // 9:00 AM
        const endOfWorkTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 17, 30); // 5:30 PM

        if (now >= startOfWorkTime && now <= endOfWorkTime) {
          const totalWorkTime = endOfWorkTime - startOfWorkTime;
          const elapsedTime = now - startOfWorkTime;
          const progressPercentage = (elapsedTime / totalWorkTime) * 100;

          const progressBar = document.querySelector('.progress-bar .progress');
          progressBar.style.width = `${progressPercentage}%`;
        } else {
          const progressBar = document.querySelector('.progress-bar .progress');
          progressBar.style.width = '0%';
        }
      }

      // Call the function to update the progress bar when the page loads
      updateProgressBar();


      // Get the holiday list element
      const holidayList = document.getElementById('holidayList');


      //----------------------------------weekly attendance---------------------------------------------------------------------------------------------------------------------

      // Function to generate sample attendance data for demonstration
      function generateSampleAttendanceData() {
        // Calculate the start and end dates for the previous week
        var currentDate = new Date();
        var lastMonday = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() - currentDate.getDay() - 6);
        var lastSunday = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() - currentDate.getDay());

        // Format the dates to 'YYYY-MM-DD' format
        var formattedLastMonday = formatDate(lastMonday);
        var formattedLastSunday = formatDate(lastSunday);

        // Simulate sample attendance data for the previous week (Monday to Sunday)
        return {
          'Monday': { start: '09:00', end: '17:30', date: formattedLastMonday }, // Working hours for Monday
          'Tuesday': { start: '09:00', end: '17:30', date: formatDate(new Date(lastMonday.setDate(lastMonday.getDate() + 1))) }, // Working hours for Tuesday
          'Wednesday': { start: '09:00', end: '17:30', date: formatDate(new Date(lastMonday.setDate(lastMonday.getDate() + 1))) }, // Working hours for Wednesday
          'Thursday': { start: '09:00', end: '17:30', date: formatDate(new Date(lastMonday.setDate(lastMonday.getDate() + 1))) }, // Working hours for Thursday
          'Friday': { start: '09:00', end: '17:30', date: formatDate(new Date(lastMonday.setDate(lastMonday.getDate() + 1))) }, // Working hours for Friday
          'Saturday': { start: '09:00', end: '13:00', date: formatDate(new Date(lastMonday.setDate(lastMonday.getDate() + 1))) }, // Half-day on Saturday
          'Sunday': { start: null, end: null, date: formattedLastSunday } // No work on Sunday
        };
      }

      // Function to format date to 'YYYY-MM-DD' format
      function formatDate(date) {
        var year = date.getFullYear();
        var month = (date.getMonth() + 1).toString().padStart(2, '0');
        var day = date.getDate().toString().padStart(2, '0');
        return `${year}-${month}-${day}`;
      }

      // Function to calculate total hours worked for each day based on attendance data
      function calculateTotalHoursWorked(attendanceData) {
        var totalHours = {};
        for (var day in attendanceData) {
          var start = attendanceData[day].start;
          var end = attendanceData[day].end;
          if (start && end) {
            var [startHour, startMinute] = start.split(':').map(Number);
            var [endHour, endMinute] = end.split(':').map(Number);
            var hoursWorked = endHour - startHour + (endMinute - startMinute) / 60; // Calculate total hours worked
            totalHours[day] = hoursWorked;
          } else {
            totalHours[day] = 0; // If start or end time is null, set hours worked to 0
          }
        }
        return totalHours;
      }

      // Function to update the weekly attendance chart
      function updateWeeklyAttendanceChart() {
        var attendanceData = generateSampleAttendanceData(); // Get sample attendance data
        var totalHoursWorked = calculateTotalHoursWorked(attendanceData); // Calculate total hours worked

        // Prepare data for chart
        var labels = Object.keys(totalHoursWorked).map(day => {
          var dayOfWeek = new Date(attendanceData[day].date).toLocaleDateString('en', { weekday: 'long' });
          return dayOfWeek;
        });

        var data = Object.values(totalHoursWorked);

        // Update the chart
        var ctx = document.getElementById('weekly-attendance-chart').getContext('2d');
        var myChart = new Chart(ctx, {
          type: 'bar',
          data: {
            labels: labels,
            datasets: [{
              label: 'Total Hours Worked',
              data: data,
              backgroundColor: 'rgba(54, 162, 235, 0.2)',
              borderColor: 'rgba(54, 162, 235, 1)',
              borderWidth: 1
            }]
          },
          options: {
            scales: {
              y: {
                beginAtZero: true
              }
            },
            plugins: {
              tooltip: {
                callbacks: {
                  label: function (context) {
                    var label = context.dataset.label || '';
                    if (label) {
                      label += ': ';
                    }
                    if (context.parsed.y !== null) {
                      label += context.parsed.y + ' hours';
                    }
                    return label;
                  },
                  title: function (context) {
                    var index = context[0].dataIndex;
                    var day = labels[index];
                    var date = attendanceData[Object.keys(attendanceData)[index]].date;
                    return `${date} (${day})`;
                  }
                }
              },
              legend: {
                display: false
              }
            }
          }
        });
      }

      // Call the function to update the weekly attendance chart
      updateWeeklyAttendanceChart();




    });



  </script>

  <script>
    //--------------------------------------------navbar profile-------------------------------------------------------------           

    window.addEventListener('load', function () {
      const savedImage = localStorage.getItem('profileImage');
      if (savedImage) {
        document.getElementById('nav-profile-img').src = savedImage;
      }
    });
    // Handle file input change event
    document.getElementById('profileImage').addEventListener('change', function (event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          // Update image sources
          const imageData = e.target.result;
          document.getElementById('nav-profile-img').src = imageData;

          // Save the image data to local storage
          localStorage.setItem('profileImage', imageData);
        };
        reader.readAsDataURL(file);
      }
    });
    // Function to remove profile image
    function removeProfileImage() {
      // Update image sources to the default image
      document.getElementById('nav-profile-img').src = '';

      // Remove the image data from local storage
      localStorage.removeItem('profileImage');
    }

    // Handle click event for "Remove my profile image"
    document.querySelector('.btn-danger').addEventListener('click', function (event) {
      event.preventDefault(); // Prevent the default behavior of the anchor element
      removeProfileImage();
    });

  </script>

</body>

</html>